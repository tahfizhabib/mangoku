# ═══════════════════════════════════════════════════════════════════════════
# Mango Window Manager - Tokyo Night Dev Config
# ═══════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────
# Autostart
# ───────────────────────────────────────────────────────────────────────────
exec-once=waybar
exec-once=swaybg -i ~/.config/mango/wallpaper/room.png
exec-once=vicinae server

# ───────────────────────────────────────────────────────────────────────────
# Monitor Configuration
# ───────────────────────────────────────────────────────────────────────────
monitorrule=DP-1,0.55,1,tile,0,1,0,0,1920,1080,320
monitorrule=HDMI-A-1,0.55,1,tile,0,1,1920,0,1920,1080,75

# ───────────────────────────────────────────────────────────────────────────
# Tokyo Night Colors
# ───────────────────────────────────────────────────────────────────────────
rootcolor=0x1a1b26ff
bordercolor=0x565f89ff
focuscolor=0x7aa2f7ff
maximizescreencolor=0x9ece6aff
urgentcolor=0xf7768eff
scratchpadcolor=0x7dcfffff
globalcolor=0xbb9af7ff
overlaycolor=0x73dacaff

# ───────────────────────────────────────────────────────────────────────────
# Visual Effects - Minimal & Fast
# ───────────────────────────────────────────────────────────────────────────
# Disable all effects for maximum performance
blur=0
shadows=0
border_radius=0
borderpx=2
no_border_when_single=0
focused_opacity=0.95
unfocused_opacity=0.95

# Animations - Default Mango style but faster
animations=1
animation_type_open=slide
animation_type_close=slide
animation_fade_in=1
animation_fade_out=1
tag_animation_direction=1
zoom_initial_ratio=0.3
zoom_end_ratio=0.8
fadein_begin_opacity=0.5
fadeout_begin_opacity=0.8
animation_duration_move=300
animation_duration_open=250
animation_duration_tag=200
animation_duration_close=400
animation_duration_focus=0
animation_curve_open=0.46,1.0,0.29,1
animation_curve_move=0.46,1.0,0.29,1
animation_curve_tag=0.46,1.0,0.29,1
animation_curve_close=0.08,0.92,0,1
animation_curve_focus=0.46,1.0,0.29,1

# ───────────────────────────────────────────────────────────────────────────
# Gaps - Consistent
# ───────────────────────────────────────────────────────────────────────────
gappih=3
gappiv=3
gappoh=3
gappov=3
smartgaps=0

# ───────────────────────────────────────────────────────────────────────────
# Productivity Settings
# ───────────────────────────────────────────────────────────────────────────
# Overview mode settings
enable_hotarea=1
hotarea_size=10
ov_tab_mode=0
overviewgappi=8
overviewgappo=40

# Better workflow behavior
view_current_to_back=0
sloppyfocus=1
warpcursor=1
focus_on_activate=1
focus_cross_monitor=0
focus_cross_tag=0

# ───────────────────────────────────────────────────────────────────────────
# Layout Settings
# ───────────────────────────────────────────────────────────────────────────
default_mfact=0.55
default_nmaster=1
new_is_master=1

# Scroller layout
scroller_structs=20
scroller_default_proportion=0.8
scroller_focus_center=0

# Scratchpad
scratchpad_width_ratio=0.8
scratchpad_height_ratio=0.9

# ───────────────────────────────────────────────────────────────────────────
# Workspace Layouts (Dev-focused)
# ───────────────────────────────────────────────────────────────────────────
tagrule=id:1,layout_name:tile,no_hide:1
tagrule=id:2,layout_name:tile,no_hide:1
tagrule=id:3,layout_name:tile,no_hide:1
tagrule=id:4,layout_name:tile,no_hide:1
tagrule=id:5,layout_name:tile,no_hide:1
tagrule=id:6,layout_name:monocle
tagrule=id:7,layout_name:monocle
tagrule=id:8,layout_name:monocle
tagrule=id:9,layout_name:tile

# ───────────────────────────────────────────────────────────────────────────
# Input Settings
# ───────────────────────────────────────────────────────────────────────────
repeat_rate=30
repeat_delay=300
xkb_rules_layout=us

tap_to_click=1
tap_and_drag=1
trackpad_natural_scrolling=0
disable_while_typing=1

# ───────────────────────────────────────────────────────────────────────────
# SYSTEM CONTROL
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,r,reload_config
bind=SUPER+SHIFT,e,quit
bind=SUPER,q,killclient
bind=SUPER+SHIFT,q,spawn,wlogout

# ───────────────────────────────────────────────────────────────────────────
# APP LAUNCHERS
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,d,spawn,vicinae toggle
bind=SUPER,Return,spawn,foot
bind=SUPER,b,spawn,firefox
bind=SUPER,e,spawn,foot -e ranger
bind=SUPER,n,spawn,foot -e nvim
bind=SUPER,z,spawn,zeditor
bind=SUPER,c,spawn,code

# ───────────────────────────────────────────────────────────────────────────
# WINDOW FOCUS (Vim-style + Arrows)
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,h,focusdir,left
bind=SUPER,j,focusdir,down
bind=SUPER,k,focusdir,up
bind=SUPER,l,focusdir,right

bind=ALT,Left,focusdir,left
bind=ALT,Down,focusdir,down
bind=ALT,Up,focusdir,up
bind=ALT,Right,focusdir,right

bind=SUPER,Tab,focusstack,next
bind=SUPER+SHIFT,Tab,focusstack,prev

# ───────────────────────────────────────────────────────────────────────────
# WINDOW MOVEMENT
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER+SHIFT,h,exchange_client,left
bind=SUPER+SHIFT,j,exchange_client,down
bind=SUPER+SHIFT,k,exchange_client,up
bind=SUPER+SHIFT,l,exchange_client,right

bind=SUPER+SHIFT,Left,exchange_client,left
bind=SUPER+SHIFT,Down,exchange_client,down
bind=SUPER+SHIFT,Up,exchange_client,up
bind=SUPER+SHIFT,Right,exchange_client,right

# Swap with master
bind=SUPER+SHIFT,Return,zoom

# ───────────────────────────────────────────────────────────────────────────
# WINDOW STATES
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,f,togglefullscreen
bind=SUPER,m,togglemaximizescreen
bind=SUPER,space,togglefloating
bind=SUPER,g,toggleglobal

# Scratchpad
bind=SUPER,grave,toggle_scratchpad
bind=SUPER,i,minimized
bind=SUPER+SHIFT,i,restore_minimized

# Overview mode
bind=ALT,Tab,toggleoverview

# ───────────────────────────────────────────────────────────────────────────
# LAYOUT MANAGEMENT
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,t,switch_layout

# Master/Stack
bind=SUPER,comma,incnmaster,+1
bind=SUPER,period,incnmaster,-1
bind=SUPER+CTRL,h,setmfact,-10
bind=SUPER+CTRL,l,setmfact,+10

# Gaps
bind=SUPER,equal,incgaps,2
bind=SUPER,minus,incgaps,-2
bind=SUPER+SHIFT,g,togglegaps

# ───────────────────────────────────────────────────────────────────────────
# WINDOW RESIZE (Floating)
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER+ALT,h,resizewin,-50,0
bind=SUPER+ALT,j,resizewin,0,50
bind=SUPER+ALT,k,resizewin,0,-50
bind=SUPER+ALT,l,resizewin,50,0

bind=SUPER+ALT,Left,resizewin,-50,0
bind=SUPER+ALT,Down,resizewin,0,50
bind=SUPER+ALT,Up,resizewin,0,-50
bind=SUPER+ALT,Right,resizewin,50,0

# Center floating window
bind=SUPER+ALT,c,centerwin

# ───────────────────────────────────────────────────────────────────────────
# WORKSPACE NAVIGATION (Synced 1-5, Independent 6-9)
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER,1,view,1,1
bind=SUPER,2,view,2,1
bind=SUPER,3,view,3,1
bind=SUPER,4,view,4,1
bind=SUPER,5,view,5,1
bind=SUPER,6,view,6,0
bind=SUPER,7,view,7,0
bind=SUPER,8,view,8,0
bind=SUPER,9,view,9,0

# Cycle workspaces
bind=SUPER,bracketleft,viewtoleft,1
bind=SUPER,bracketright,viewtoright,1
bind=CTRL,bracketleft,viewtoleft_have_client,1
bind=CTRL,bracketright,viewtoright_have_client,1

# ───────────────────────────────────────────────────────────────────────────
# MOVE WINDOW TO WORKSPACE
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER+SHIFT,1,tag,1,1
bind=SUPER+SHIFT,2,tag,2,1
bind=SUPER+SHIFT,3,tag,3,1
bind=SUPER+SHIFT,4,tag,4,1
bind=SUPER+SHIFT,5,tag,5,1
bind=SUPER+SHIFT,6,tag,6,0
bind=SUPER+SHIFT,7,tag,7,0
bind=SUPER+SHIFT,8,tag,8,0
bind=SUPER+SHIFT,9,tag,9,0

bind=SUPER+CTRL,bracketleft,tagtoleft,1
bind=SUPER+CTRL,bracketright,tagtoright,1

# ───────────────────────────────────────────────────────────────────────────
# MONITOR MANAGEMENT
# ───────────────────────────────────────────────────────────────────────────
bind=SUPER+ALT,h,focusmon,left
bind=SUPER+ALT,l,focusmon,right
bind=SUPER+ALT+SHIFT,h,tagmon,left,0
bind=SUPER+ALT+SHIFT,l,tagmon,right,0

bind=SUPER+ALT,Left,focusmon,left
bind=SUPER+ALT,Right,focusmon,right
bind=SUPER+ALT+SHIFT,Left,tagmon,left,0
bind=SUPER+ALT+SHIFT,Right,tagmon,right,0

# ───────────────────────────────────────────────────────────────────────────
# MEDIA CONTROLS
# ───────────────────────────────────────────────────────────────────────────
bind=NONE,XF86AudioRaiseVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind=NONE,XF86AudioLowerVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind=NONE,XF86AudioMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind=NONE,XF86AudioMicMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind=NONE,XF86MonBrightnessUp,spawn,brightnessctl set +5%
bind=NONE,XF86MonBrightnessDown,spawn,brightnessctl set 5%-

# ───────────────────────────────────────────────────────────────────────────
# SCREENSHOTS (grim + slurp + satty + wl-clipboard)
# Install: sudo pacman -S grim slurp wl-clipboard satty
# ───────────────────────────────────────────────────────────────────────────
# Super+S = Select area, open satty editor, auto-copy and save to Pictures
bind=SUPER,s,spawn_shell,grim -g "$(slurp)" /tmp/screenshot.png && satty --filename /tmp/screenshot.png --output-filename /home/rakhal/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png --copy-command wl-copy --early-exit && rm /tmp/screenshot.png

# Print = Select area to clipboard only
bind=NONE,Print,spawn,grim -g "$(slurp)" - | wl-copy

# Shift+Print = Full screen to clipboard only
bind=SHIFT,Print,spawn,grim - | wl-copy

# Super+Print = Full screen to file
bind=SUPER,Print,spawn,grim /home/rakhal/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png

# Ctrl+Print = Select area to file only
bind=CTRL,Print,spawn,grim -g "$(slurp)" /home/rakhal/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png

# ───────────────────────────────────────────────────────────────────────────
# MOUSE BINDINGS
# ───────────────────────────────────────────────────────────────────────────
mousebind=SUPER,btn_left,moveresize,curmove
mousebind=SUPER,btn_right,moveresize,curresize

# Overview mode mouse actions
mousebind=NONE,btn_left,toggleoverview,1
mousebind=NONE,btn_right,killclient,0
mousebind=NONE,btn_middle,togglemaximizescreen,0

# ───────────────────────────────────────────────────────────────────────────
# SCROLL WHEEL WORKSPACE SWITCHING
# ───────────────────────────────────────────────────────────────────────────
axisbind=SUPER,UP,viewtoleft_have_client
axisbind=SUPER,DOWN,viewtoright_have_client

# ───────────────────────────────────────────────────────────────────────────
# TOUCHPAD GESTURES (Optional - Uncomment if needed)
# ───────────────────────────────────────────────────────────────────────────
# gesturebind=none,left,3,focusdir,left
# gesturebind=none,right,3,focusdir,right
# gesturebind=none,up,3,focusdir,up
# gesturebind=none,down,3,focusdir,down
# gesturebind=none,left,4,viewtoleft_have_client
# gesturebind=none,right,4,viewtoright_have_client
